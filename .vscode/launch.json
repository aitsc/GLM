{
    "configurations": [
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "cwd": "${fileDirname}"
        },
        {
            "name": "torch.distributed.launch",
            "type": "python",
            "request": "launch",
            "program": "~/anaconda3/envs/GLM/lib/python3.8/site-packages/torch/distributed/launch.py",
            "console": "integratedTerminal",
            "args": [
                "--nproc_per_node=1",
                "--nnodes=1",
                "--node_rank=0",
                "--master_addr=localhost",
                "--master_port=12367",
                "finetune_glm.py",
                "--custom_model=model_blocklm_base",
                "--custom_task=task_copa",
                "--custom_script=finetune_superglue",
            ],
            "env": {"CUDA_VISIBLE_DEVICES":"0"},
        },
        {
            "name": "单机测试",
            "type": "python",
            "request": "launch",
            "program": "${file}", // 例如运行 tsc/ac_模型加载和保存.py
            "console": "integratedTerminal",
            "args": [
                "--custom_model=model_blocklm_base",
                "--custom_task=task_copa",
                "--custom_script=finetune_superglue",
            ],
            "env": {"CUDA_VISIBLE_DEVICES":"0"},
        },
        {
            "name": "deepspeed",
            "type": "python",
            "request": "launch",
            "program": "./tsc/ad_deepspeed.py",
            "console": "integratedTerminal",
            "args": [
                "--master_port=12367",
                "--num_nodes=1",
                "--num_gpus=1",
                "--hostfile=",
                "pretrain_glm.py",
                "--custom_model_ds=block_base",
                "--custom_script=ds_pretrain_nvidia",
            ],
            "env": {
                "NCCL_DEBUG":"info",
                "NCCL_IB_DISABLE":"0",
                "NCCL_NET_GDR_LEVEL":"2",
            },
        },
        {
            "name": "pretrain_glm",
            "type": "python",
            "request": "launch",
            "program": "pretrain_glm.py",
            "console": "integratedTerminal",
            "args": [
                "--custom_model_ds=block_base",
                "--custom_script=pretrain_nvidia",
            ],
            "env": {"CUDA_VISIBLE_DEVICES":"0"},
        },
    ]
}